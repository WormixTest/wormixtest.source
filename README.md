## Локальный сервер приложения wormixtest.com

Перед запуском необходимо изменить в корне проекта
файл .env с содержимым:

LOGIN="Ваш логин"

PASSWORD="Ваш пароль"

Далее запустить через терминал (на Windows и Linux одинаково) командой:

**docker-compose up -d**

Внимательно смотрите в логи сервера, возможно, что авторизация
не прошла и вы не смогли подключиться.

После подключения к серверу все запросы будут маршрутизироваться
в этот локальный сервер через протокол-наслойку WTP над TCP.

Далее в нужной версии приложения на ваш выбор вы копируете preloader.swf в preloader_test.swf (именно с таким названием) и меняете абсолютно все порты на 50197 через JPEXS, перезапускаете TSU и теперь появится галочка "Тест теста" при включении версии, ставите на ней галочку и тогда будет грузиться preloader_test.swf вместо preloader.swf

При заходе в приложение вам будет показана табличка "К вашей сессии
был подключен ваш локальный сервер."

В некоторых сериалайзерах есть handle-фции. Когда свф отправляет
номер команды и блок данных (ByteArray), то вызывается
handle ф-ция сериалайзера, у которого static $command_id равен
отправленной с клиента команды. Хендл-фции имеют такой вид:

```php
handle($callback, $user_id, $input)
```

callback - это ссылка на объект сервера для доступа из ф-ции

user_id - это id юзера если он ранее прошёл через Login сериалайзер

input - это блок данных (ByteArray)

**Разберём блок данных ByteArray**

Для понимания разберём пример как отправить серверное сообщение
игроку (отправка возможна только внутри handle-функций серилайзеров):

```php
$msg = "Привет";
$output = new ByteArray;
$output->write_utf($msg);
$callback->socket_write(ServerMessage::$command_id, $output);
```

Внимание! Не трогать и не редактировать файл WTP.php, это
тестовый протокол со встроенной системой лицензирования
вашей учётной записи и прав на подключение к мосту WTP,
менять протокол для разработки вам не потребуется.